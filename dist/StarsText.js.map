{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 883feeacdcd86349eb7d","webpack:///./src/StarsText.js","webpack:///external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\",\"root\":\"_\"}"],"names":["Dot","centerX","centerY","centerZ","radius","dx","dy","dz","tx","ty","tz","x","y","z","zMax","canvas","focallength","context","getContext","scale","alpha","round","Math","abs","save","beginPath","arc","width","height","PI","fillStyle","fill","restore","StarsText","animateRunning","requestId","lastTime","direction","pause","canvasHeight","fontSize","dpr","window","devicePixelRatio","set_default","_resizeWidth","document","body","clientWidth","text","cancelAnimationFrame","clearRect","dots","_getContentData","each","dot","random","paint","_animate","thisTime","Date","requestAnimationFrame","bind","toString","_drawImg","_drawText","imgData","getImageData","i","data","push","font","textAlign","textBaseline","fillText","img","wgth","parseInt","drawImage"],"mappings":"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","file":"StarsText.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"lodash\")) : factory(root[\"_\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 883feeacdcd86349eb7d","import _ from 'lodash'\n\n\nexport class Dot {\n  constructor(centerX, centerY, centerZ, radius) {\n    this.dx = centerX // 最后的位置，真正要进场到的位置\n    this.dy = centerY\n    this.dz = centerZ\n    this.tx = 0 // 出场后的停留位置\n    this.ty = 0\n    this.tz = 0\n    this.x = centerX\n    this.y = centerY\n    this.z = centerZ\n    this.zMax = centerZ // 用于计算alpha值\n    this.radius = radius\n  }\n\n  paint(canvas, focallength) {\n    let context = canvas.getContext('2d')\n    let scale = focallength / (focallength + this.z)\n    let alpha = _.round(1 - Math.abs(this.z / this.zMax), 2)\n\n    context.save()\n    context.beginPath()\n    context.arc(canvas.width / 2 + (this.x - canvas.width / 2) * scale, canvas.height / 2 + (this.y - canvas.height / 2) * scale, this.radius * scale, 0, 2 * Math.PI)\n    context.fillStyle = `rgba(255,255,255,${alpha})`\n    context.fill()\n    context.restore()\n  }\n}\n\nexport class StarsText {\n\n  set_default() {\n    this.focallength = 100 // z轴的深度\n    this.animateRunning = false\n    this.requestId = 0 //animate frame request id\n    this.lastTime = 0\n    this.direction = true //方向进场还是出场\n    this.pause = false\n    this.canvasHeight = 200\n    this.fontSize = 200\n    this.dpr = window.devicePixelRatio || 1\n  }\n  constructor(canvas) {\n    this.set_default();\n    this.canvas = canvas\n    this.context = canvas.getContext('2d')\n    this._resizeWidth()\n  }\n  _resizeWidth() { \n    // 设置 canvas 的宽高，防止出现高分辨屏幕变模糊\n    this.width = this.canvas.width =  document.body.clientWidth * this.dpr\n    this.height = this.canvas.height = this.canvasHeight * this.dpr\n    this.fontSize = this.fontSize * 0.95\n  }\n  // 入场某个文字或者图片\n  animateContent(text) {\n    window.cancelAnimationFrame(this.requestId)\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.dots = this._getContentData(text)\n    this.direction = true\n    this.pause = false\n\n    // 初始化点位置\n    _.each(this.dots, dot => {\n      dot.x = Math.random() * this.canvas.width\n      dot.y = Math.random() * this.canvas.height\n      dot.z = Math.random() * this.focallength * 2 - this.focallength\n\n      dot.zMax = dot.z\n\n      dot.tx = Math.random() * this.canvas.width\n      dot.ty = Math.random() * this.canvas.height\n      dot.tz = Math.random() * this.focallength * 2 - this.focallength\n      dot.paint(this.canvas, this.focallength)\n    })\n\n    // 开始进场\n    this._animate()\n  }\n\n  // 点运动\n  _animate() {\n    this.animateRunning = true\n    let thisTime = +new Date()\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\n    _.each(this.dots, dot => {\n      // console.log(this.direction)\n      if (this.direction) {\n        if (Math.abs(dot.dx - dot.x) < 0.1 && Math.abs(dot.dy - dot.y) < 0.1 && Math.abs(dot.dz - dot.z) < 0.1) {\n          dot.x = dot.dx\n          dot.y = dot.dy\n          dot.z = dot.dz\n\n          if (thisTime - this.lastTime > 300) {\n            this.direction = false\n          }\n        } else {\n          dot.x = dot.x + (dot.dx - dot.x) * 0.1\n          dot.y = dot.y + (dot.dy - dot.y) * 0.1\n          dot.z = dot.z + (dot.dz - dot.z) * 0.1\n          this.lastTime = +new Date()\n        }\n      } else {\n        if (Math.abs(dot.tx - dot.x) < 0.1 && Math.abs(dot.ty - dot.y) < 0.1 && Math.abs(dot.tz - dot.z) < 0.1) {\n          dot.x = dot.tx\n          dot.y = dot.ty\n          dot.z = dot.tz\n          this.pause = true\n        } else {\n          dot.zMax = dot.tz // 出场目标z值\n\n          dot.x = dot.x + (dot.tx - dot.x) * 0.1\n          dot.y = dot.y + (dot.ty - dot.y) * 0.1\n          dot.z = dot.z + (dot.tz - dot.z) * 0.1\n          // this.pause = false\n        }\n      }\n      dot.paint(this.canvas, this.focallength)\n    })\n\n    if (!this.pause) {\n      if ('requestAnimationFrame' in window) {\n        this.requestId = window.requestAnimationFrame(this._animate.bind(this))\n      }\n    }\n  }\n\n  // 从文字获取信息生成点\n  _getContentData(text) {\n    if (text.toString() === '[object HTMLImageElement]') {\n      this._drawImg(text)\n    } else {\n      this._drawText(text)\n    }\n\n    let imgData = this.context.getImageData(0, 0, this.canvas.width, this.canvas.height)\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    let dots = []\n\n    for (let x = 0; x < imgData.width; x += 5) { // 6是step\n      for (let y = 0; y < imgData.height; y += 5) {\n        let i = (y * imgData.width + x) * 4 // x列 y行的点\n        if (imgData.data[i] >= 128) { // rgb的r值大于128\n          let dot = new Dot(x - 3, y - 3, 0, 1)\n          dots.push(dot)\n        }\n      }\n    }\n    return dots\n  }\n\n  _drawText(text) {\n    let { context, canvas } = this\n    context.save()\n    context.font =  (this.fontSize ) + 'px 微软雅黑 bold'\n    context.fillStyle = 'rgba(168,168,168,1)'\n    context.textAlign = 'center'\n    context.textBaseline = 'middle'\n    context.fillText(text, canvas.width / 2, canvas.height / 2)\n    context.restore()\n  }\n\n  _drawImg(img) {\n    let { context, canvas } = this\n    let width = img.width\n    let height = img.height\n    let x = 0\n    let y = 0\n\n    if (img.width > canvas.width || img.height > canvas.height) {\n      let wgth = img.width / canvas.width - img.height / canvas.height\n      if (wgth) {\n        width = parseInt(canvas.width / 3, 10)\n        height = img.height * width / img.width\n      } else {\n        width = parseInt(canvas.height / 3, 10)\n        height = img.width * height / img.height\n      }\n    }\n\n    x = (canvas.width - width) / 2\n    y = (canvas.height - height) / 2\n\n    context.save()\n    context.drawImage(img, 0, 0, img.width, img.height, x, y, width, height)\n    context.restore()\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/StarsText.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\",\"root\":\"_\"}\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}